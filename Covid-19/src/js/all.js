const quesList=[{text:"Pensez-vous avoir eu de la fièvre ces derniers jours (frissons, sueurs) ?",choices:'<label for="oui">Oui</label>\n        <input type="radio" value="oui" id="oui" name="choice"><br>\n        <label for="non">Non</label>\n        <input type="radio" id="non" value="non" name="choice"><br>',number:1},{text:"quelle est votre température ?",choices:'<label for="numerique">degrée</label>\n        <input type="number" id="numerique">',number:2},{text:"Avez-vous une toux ou une augmentation de votre toux habituelle ces derniers jours ?",choices:'<label for="oui">Oui</label>\n        <input type="radio" value="oui" id="oui" name="choice"><br>\n        <label for="non">Non</label>\n        <input type="radio" id="non" value="non" name="choice"><br>',number:3},{text:"Avez-vous des douleurs musculaires ou des courbatures inhabituelles ces derniers jours ? ",choices:'<label for="oui">Oui</label>\n        <input type="radio" value="oui" id="oui" name="choice"><br>\n        <label for="non">Non</label>\n        <input type="radio" id="non" value="non" name="choice"><br>',number:4},{text:"Avez-vous un mal de gorge apparu ces derniers jours ? ",choices:'<label for="oui">Oui</label>\n        <input type="radio" value="oui" id="oui" name="choice"><br>\n        <label for="non">Non</label>\n        <input type="radio" id="non" value="non" name="choice"><br>',number:5},{text:"Avez-vous de la diarrhée ces dernières 24 heures (au moins 3 selles molles) ?",choices:'<label for="oui">Oui</label>\n        <input type="radio" value="oui" id="oui" name="choice"><br>\n        <label for="non">Non</label>\n        <input type="radio" id="non" value="non" name="choice"><br>',number:6},{text:"Avez-vous une fatigue inhabituelle ces derniers jours ?",choices:'<label for="oui">Oui</label>\n        <input type="radio" value="oui" id="oui" name="choice"><br>\n        <label for="non">Non</label>\n        <input type="radio" id="non" value="non" name="choice"><br>',number:7},{text:"Cette fatigue vous oblige-t-elle à vous reposer plus de la moitié de la journée ?",choices:'<label for="oui">Oui</label>\n        <input type="radio" value="oui" id="oui" name="choice"><br>\n        <label for="non">Non</label>\n        <input type="radio" id="non" value="non" name="choice"><br>',number:8},{text:"Avez-vous des difficultés importantes pour vous alimenter ou boire depuis plus de 24h ? ",choices:'<label for="oui">Oui</label>\n        <input type="radio" value="oui" id="oui" name="choice"><br>\n        <label for="non">Non</label>\n        <input type="radio" id="non" value="non" name="choice"><br>',number:9},{text:"Avez-vous vu apparaître une gêne respiratoire ou une augmentation de votre gêne respiratoire habituelle ? ",choices:'<label for="oui">Oui</label>\n        <input type="radio" value="oui" id="oui" name="choice"><br>\n        <label for="non">Non</label>\n        <input type="radio" id="non" value="non" name="choice"><br>',number:10},{text:"Comment vous sentez-vous ? ",choices:'<div class="flex-radio">\n\t\t<div class="mini">\n\t\t<label for="fatigue">Fatigué</label>\n\t\t<input type="radio" value="fatigué" id="fatigue" name="choice"><br>\n\t\t</div>\n\t\t<div class="mini">\n\t\t<label for="bien">Bien</label>\n\t\t<input type="radio" id="bien" value="bien" name="choice"><br>\n\t\t</div>\n\t</div>\n\t<div class="flex-radio">\n\t\t<div class="mini">\n\t\t<label for="trop-fatigue">Trop fatigué</label>\n\t\t<input type="radio" value="trop-fatigué" id="trop-fatigue" name="choice"><br>\n\t</div>\n\t\t<div class="mini">\n\t\t<label for="moyen">Moyen</label>\n\t\t<input type="radio" id="moyen" value="moyen" name="choice"><br>\n\t</div>\n\t</div>',number:11},{text:"Quel est votre âge ? \n        Ceci, afin de calculer un facteur de risque spécifique.",choices:'<label for="numerique">ans</label>\n        <input type="number" id="numerique" name="choice">',number:12},{text:"Quel est votre taille ? \n        Afin de calculer l’indice de masse corporelle qui est un facteur influençant le risque de complications de l’infection.",choices:'<label for="numerique">cm</label>\n        <input type="number" id="numerique" name="choice">',number:13},{text:"Quel est votre poids ?\n        Afin de calculer l’indice de masse corporelle qui est un facteur influençant le risque de complications de l’infection.",choices:'<label for="numerique">kg</label>\n        <input type="number" id="numerique" name="choice">',number:14},{text:"Avez-vous de l’hypertension artérielle ? Ou avez-vous une maladie cardiaque ou vasculaire ? Ou prenez-vous un traitement à visée cardiologique ?",choices:'<label for="oui">Oui</label>\n        <input type="radio" value="oui" id="oui" name="choice"><br>\n        <label for="non">Non</label>\n        <input type="radio" id="non" value="non" name="choice"><br>\n        <label for="sspas">Ne sait pas</label>\n        <input type="radio" id="sspas" value="oui" name="choice" >',number:15},{text:"Êtes-vous diabétique ?",choices:'<label for="oui">Oui</label>\n        <input type="radio" value="oui" id="oui" name="choice"><br>\n        <label for="non">Non</label>\n        <input type="radio" id="non" value="non" name="choice"><br>',number:16},{text:"Avez-vous ou avez-vous eu un cancer ?",choices:'<label for="oui">Oui</label>\n        <input type="radio" value="oui" id="oui" name="choice"><br>\n        <label for="non">Non</label>\n        <input type="radio" id="non" value="non" name="choice"><br>',number:17},{text:"Avez-vous une maladie respiratoire ? Ou êtes-vous suivi par un pneumologue ? ?\n        Ou êtes-vous suivi par un pneumologue ?",choices:'<label for="oui">Oui</label>\n        <input type="radio" value="oui" id="oui" name="choice"><br>\n        <label for="non">Non</label>\n        <input type="radio" id="non" value="non" name="choice"><br>',number:18},{text:"Avez-vous une insuffisance rénale chronique dialysée ?",choices:'<label for="oui">Oui</label>\n        <input type="radio" value="oui" id="oui" name="choice"><br>\n        <label for="non">Non</label>\n        <input type="radio" id="non" value="non" name="choice"><br>',number:19},{text:"Avez-vous une maladie chronique du foie ?",choices:'<label for="oui">Oui</label>\n        <input type="radio" value="oui" id="oui" name="choice"><br>\n        <label for="non">Non</label>\n        <input type="radio" id="non" value="non" name="choice"><br>',number:20},{text:"Êtes-vous enceinte ?",choices:'<label for="oui">Oui</label>\n        <input type="radio" value="oui" id="oui" name="choice"><br>\n        <label for="non">Non</label>\n        <input type="radio" id="non" value="non" name="choice"><br>\n        <label for="sspas">Non applicable</label>\n        <input type="radio" id="sspas" value="non" name="choice" >',number:21},{text:"Avez-vous une maladie connue pour diminuer vos défenses immunitaires ?",choices:'<label for="oui">Oui</label>\n        <input type="radio" value="oui" id="oui" name="choice"><br>\n        <label for="non">Non</label>\n        <input type="radio" id="non" value="non" name="choice"><br>\n        <label for="sspas">Ne sait pas</label>\n        <input type="radio" id="sspas" value="non" name="choice" >',number:22},{text:"Prenez-vous un traitement immunosuppresseur ?\n        C’est un traitement qui diminue vos défenses contre les infections.\n        Voici quelques exemples : corticoïdes, méthotrexate, ciclosporine, tacrolimus, azathioprine, cyclophosphamide (liste non exhaustive).",choices:'<label for="oui">Oui</label>\n        <input type="radio" value="oui" id="oui" name="choice"><br>\n        <label for="non">Non</label>\n        <input type="radio" id="non" value="non" name="choice"><br>\n        <label for="sspas">Ne sait pas</label>\n        <input type="radio" id="sspas" value="non" name="choice">',number:23}],launch=document.querySelector(".demarrer"),launchBtn=document.querySelector(".demarrer_button"),preambule=document.querySelector(".preambule"),progress=document.querySelector(".progress"),questions=document.querySelector(".ques"),previous=document.querySelector(".button_previous"),next=document.querySelector(".button_next"),questionText=document.querySelector(".ques_text"),form=document.querySelector(".ques_form"),answer=document.getElementsByName("choice"),circles=document.querySelectorAll(".circle"),resultat=document.querySelector(".resultat"),reprendre=document.querySelector(".resultat_reprendre");console.log(circles),circles[0].style.display="block";let counter=0,values=[];function barProgress(e){progress.firstElementChild.firstElementChild.style.width=100/23*e+"%",progress.lastElementChild.textContent=e+"/23"}function sequenceQuestions(e){if(e<24){let n=quesList.find(n=>n.number==e);questionText.textContent=n.text,form.innerHTML=n.choices}}function result(e,n){let o=e.slice(11),i=e.slice(0,5),t="oui"===e[0],u="oui"===e[2],l="oui"===e[4],r="oui"===e[3],a="oui"===e[5],s="non"===e[0],c="non"===e[2],d="non"===e[4],p="non"===e[3],b="non"===e[5],v=(i.includes("oui"),o.includes("oui")),m=!o.includes("oui"),h=e[1]>39,f="oui"===e[7],y="fatigué"===e[10]||"trop-fatigué"===e[10],x=e[1]<39,q="non"===e[7],g="bien"===e[10]||"moyen"===e[10],z=e[1]<35.4,C="oui"===e[9],N="oui"===e[8],O=e[1]>35.4,L="non"===e[9],A="non"===e[8],E=e[11];13===n&&E<15&&(circles[1].style.display="none",circles[2].style.display="block",questions.classList.remove("visible"),progress.classList.remove("flex"),resultat.style.display="block",resultat.children[1].lastElementChild.textContent="Prenez contact avec votre médecin généraliste au moindre doute. Cette application n’est pour l’instant pas adaptée aux personnes de moins de 15 ans. En cas d’urgence, appeler le 15"),24===n&&(circles[1].style.display="none",circles[2].style.display="block",questions.classList.remove("visible"),progress.classList.remove("flex"),resultat.style.display="block",t||u&&l||u&&r?z||C||N||v&&L&&A&&O&&(h&&f&&y||h&&f||f&&y||h&&y)||v&&L&&A&&O&&h&&q&&g||v&&L&&A&&O&&f&&x&&g||v&&L&&A&&O&&y&&x&&q?resultat.children[1].lastElementChild.textContent="veuillez appeler le numéro 141":v&&x&&q&&g&&L&&A&&O||E>50&&E<=69&&m&&x&&q&&g&&L&&A&&O||m&&O&&L&&A&&(h||f||y)?(resultat.children[1].firstElementChild.textContent="téléconsultation ou médecin généraliste ou visite à domicile ",resultat.children[1].lastElementChild.textContent="appelez le 141 si une gêne respiratoire ou des difficultés importantes pour s’alimenter ou boire pendant plus de 24h apparaissent"):resultat.children[1].lastElementChild.textContent=E<50&&m&&x&&q&&g&&L&&A&&O?"nous vous conseillons de rester à votre domicile et de contacter votre médecin en cas d’apparition de nouveaux symptômes. Vous pourrez aussi utiliser à nouveau l’application pour réévaluer vos symptômes":"Votre situation ne relève probablement pas du Covid-19. N’hésitez pas à contacter votre médecin en cas de doute. Vous pouvez refaire le test en cas de nouveau symptôme pour réévaluer la   situation.   Pour   toute information concernant   le   Covid-19 allez vers la page d’accueil.":(t&&c&&b||s&&u&&d&&p||s&&c&&l||c&&r||s&&a)&&(resultat.children[1].lastElementChild.textContent=x&&q&&g&&L&&A&&O?"Votre situation ne relève probablement pas du Covid-19. Consultez votre médecin au moindre doute.":m&&L&&A&&O&&h&&q&&g||m&&L&&A&&O&&f&&x&&g||m&&L&&A&&O&&y&&x&&q||v&&L&&A&&O&&g&&x&&q?"Votre situation ne relève probablement pas du Covid-19. Un avis médical est recommandé. Au moindre doute, appelez le 141. ":"Votre situation ne relève probablement pas du Covid-19. N’hésitez pas à contacter votre médecin en cas de doute. Vous pouvez refaire le test en cas de nouveau symptôme pour réévaluer la   situation.   Pour   toute information concernant   le   Covid-19 allez vers la page d’accueil."))}launchBtn.addEventListener("click",()=>{launch.classList.add("invisible"),preambule.classList.add("invisible"),questions.classList.add("visible"),progress.classList.add("flex"),counter=1,sequenceQuestions(counter),barProgress(counter),circles[0].style.display="none",circles[1].style.display="block"}),reprendre.addEventListener("click",()=>{values=[],circles[2].style.display="none",circles[1].style.display="block",resultat.style.display="none",next.textContent="Question suivante",questions.classList.add("visible"),progress.classList.add("flex"),counter=1,sequenceQuestions(counter),barProgress(counter)}),previous.addEventListener("click",()=>{counter<=1&&previous.classList.remove("visible"),counter<23&&(next.textContent="Question suivante"),3===counter&&"non"===values[0]&&(values.pop(),counter-=1,previous.classList.remove("visible")),9===counter&&"non"===values[6]&&(values.pop(),counter-=1),counter-=1,values.pop(),console.log(values),secenceQuestions(counter),barProgress(counter)}),next.addEventListener("click",()=>{const e=document.querySelector("#numerique");if("numerique"===form.children[1].id){if(""===e.value)return void alert("please enter valid infos");if(2===counter&&(e.value<34||e.value>42))return void alert("la temperature doit etre comprise entre 34 et 42");if(12===counter&&e.value>110)return void alert("l'age doit etre inferieure a 110");if(13===counter&&(e.value<80||e.value>250))return void alert("la taille doit etre comprise entre 80 et 250");if(14===counter&&(e.value<20||e.value>250))return void alert("le poids doit etre compris entre 20 et 250");values.push(e.value),console.log(e.value),counter+=1}else for(i=0;i<answer.length;i++)answer[i].checked&&(1===counter&&"non"===answer[i].value?(values.push(answer[i].value),values.push(37),counter+=2):7===counter&&"non"===answer[i].value?(values.push(answer[i].value),values.push("non"),counter+=2):(values.push(answer[i].value),counter+=1));console.log(counter),console.log(values),23===counter&&(next.textContent="Enregistrer et continuer"),counter>1&&previous.classList.add("visible"),sequenceQuestions(counter),barProgress(counter),result(values,counter)});